<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/jquery-ui.css" type="text/css" />
<link href="css/bootstrap-combined.min.css" rel="stylesheet">
<link href="css/bootstrap-responsive.min.css" rel="stylesheet">
<link href="css/graphite.css" rel="stylesheet">
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/underscore-min.js"></script>
<script type="text/javascript" src="js/jquery-ui-timepicker-addon.min.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/dashboard.js"></script>
<script type="text/javascript" src="js/jquery.waitforimages.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
    loadGraphitusConfig(renderGraphitus);
});
</script>

<script type="text/template" id="tmpl-dashboards-view">
<% for (idx in config.data) { %>
    <% for(col=0; col<config.columns; col++) { %>
		<% if( (idx % config.columns) == col) { %>
        <div id="item<%=idx%>" class="well span<%=12/config.columns%>" style="width:<%=config.width%>px">
			<h4 class="pull-left" style="margin: 0px;"><%=config.data[idx].title%></h4>
            <div class="pull-right">
            <button class="btn btn-small btn-primary pull-right hspacer" onclick="toggleSource(<%=idx%>);">Source</button>
            <a id="lLink<%=idx%>" href="#"><button class="btn btn-small btn-success pull-right hspacer">L</button></a>
            <a id="mLink<%=idx%>" href="#"><button class="btn btn-small btn-warning pull-right hspacer">M</button></a>
            <a id="sLink<%=idx%>" href="#"><button class="btn btn-small btn-danger pull-right hspacer">S</button></a>
            <a id="gLink<%=idx%>" href="#"><button class="btn btn-small btn-info pull-right hspacer">Graphlot</button></a>
            </div>
            <br/>
            <a id="link<%=idx%>" href=""><img id="img<%=idx%>" class="img-rounded" width="<%=config.width%>" height="<%=config.height%>"/></a>
            <br/>
            <div id="sourceContainer<%=idx%>"class="initial-hide">
                <textarea id="source<%=idx%>" style="width:<%=config.width-10%>px" class="source"></textarea><br/>
                <button class="btn btn-small" onclick="updateSource(<%=idx%>);">Update</button>
            </div>
        </div>
	    <% } %>
	<% } %>
<% } %>
</script>
<script type="text/template" id="tmpl-toolbar">
    <a class="brand" href="index.html">graphitus</a>
    <ul class="nav">
        <li class="dropdown">  
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><%= config.title %><b class="caret"></b></a>
            <ul id="dashboards" class="dropdown-menu">
                <% for (group in dashboardGroups) { %>
                    <li class="dropdown-submenu">
                        <a tabindex="-1" href="#"><%=group%></a>
                        <ul class="dropdown-menu">
                            <% for (idx in dashboardGroups[group]) { %>
                                <li>
                                    <a href="dashboard.html?id=<%=dashboardGroups[group][idx].id%>"><%=dashboardGroups[group][idx].id.replace(group+".", "")%></a>
                                </li>
                            <% } %>
                        </ul>
                    </li>
                <% } %> 
            </ul>  
        </li>
        <li class="divider-vertical"></li>
        <li>
            <form class="navbar-search form-inline pull-right">
              <input id="search" type="text" style="margin-top: 0px;" class="search-query input-mini" placeholder="Search">
            </form>
        </li>
        <li class="divider-vertical"></li>
        <li class="navbar-text">Back</li>
        <li class="divider-vertical"></li>
        <li><input placeholder="go back" type="text" class="input-mini" id="timeBack" name="timeBack" value="<%=config.timeBack%>" onchange="useHours()" /></li>
        <li class="divider-vertical"></li>
        <li class="navbar-text"> <strong>OR</strong> </li>
        <li class="divider-vertical"></li>
        <li class="navbar-text"> Date Range </li>
        <li class="divider-vertical"></li>
        <li><input type="text" class="input-small" placeholder="start date" id="start" name="start" value="<%=config.from%>" onchange="useDateRange()" /></li>
        <li class="divider-vertical"></li>
        <li><input type="text" class="input-small" placeholder="end date" id="end" name="end" value="<%=config.until%>" onchange="useDateRange()" /></li>
        <li class="divider-vertical"></li>
        <li> 
        <label class="checkbox" style="margin-top: 10px">
            <input type="checkbox" id="legend" name="legend" <% if(config.legend) {%> checked="checked" <% } %> onchange="updateGraphs()" /> Legend
        </label>
        </li>
        <li class="divider-vertical"></li>
        <li>
            <label class="checkbox" style="margin-top: 10px">
                <input type="checkbox" id="average" name="average" <% if(config.averageSeries) { %>checked="checked"<% } %> onchange="updateGraphs()" /> Average Series
            </label>
        </li>
        <li class="divider-vertical"></li>
        <li>
            <label class="checkbox" style="margin-top: 10px">
                <input type="checkbox" id="refresh" name="refresh" <% if(config.refresh) { %>checked="checked"<% } %> onchange="toggleAutoRefresh();" /> Auto Refresh
            </label>
        </li>
        <li class="divider-vertical"></li>
        <li>
            <button class="btn btn-small btn-primary pull-right hspacer" style="margin-top:8px" onclick="updateGraphs();return false;">Update</button>
        </li>
        <li class="divider-vertical"></li>
        <li>
            <div id="loadingProgress" class="progress progress-striped active" style="width: 100px;margin: 10px">
                <div class="bar" style="width: 100%;">Updating... </div>
            </div>
        </li>
        <li class="divider-vertical"></li>
        <li id="refreshCounter" class="navbar-text"></li>
    </ul>
</script>
<script type="text/template" id="tmpl-parameter-sel">
    <li class="navbar-text"><%= group %>: </li>
    <li class="divider-vertical"></li>
    <li>
    <select id="<%= group %>" name="<%= group %>" onchange="updateGraphs(); return false;" class="input-medium">
        <% $.each(params, function(paramName, param) { %>
            <% var value = ((typeof param) === 'object') ? paramName : param %>
            <% var selectedHtml = (selected && selected != "" && selected === value) ? "selected='selected'" : "" %>
            <option value="<%= value %>" <%= selectedHtml %>><%= value %></option>
        <% }); %>
    </select>
    </li>
    <li class="divider-vertical"></li>
</script>
<script type="text/template" id="tmpl-warning-dashboard">
<div class="alert alert-block">
  <button type="button" class="close" data-dismiss="alert">Ã—</button>
  <h4>Warning!</h4>
  Could not load dashboard <%= dashboardId %>, check the dashboard index and configuration file.<br/>
  Go back to <a href="index.html">Graphitus Homepage</a> 
</div>
</script>
</head>
<body lang="en">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <form  id="toolbar" class="navbar-form form-inline pull-left">
        </form>
      </div>
    </div>
    <div style="margin-top: 52px;"></div>
    <div id="parametersNavBar" class="navbar navbar-inverse">
      <div class="navbar-inner">
        <form class="navbar-form form-inline">
            <ul class="nav" id="parametersToolbar" >
            </ul>
        </form>
      </div>
    </div>
    <div id="message" class="initial-hide"></div>
    <center>
        <div id="loader" class="progress progress-striped active" style="width: 30%;">
          <div class="bar" style="width: 100%;"></div>
        </div>
    </center>
    <div id="dashboards-view" class="container" style="width: 100%">
    </div>            
</body>
</html>
